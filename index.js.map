{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '47642330-01773e177615e156ed5ec02c5';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst searchPixabayImages = async (query, page = 1, perPage = 20) => {\n  try {\n    const response = await axios.get('/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: perPage,\n      }\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nexport { searchPixabayImages };\n","const createImage = image => {\n  return `\n        <li class=\"image-card\">\n            <a href=\"${image.largeImageURL}\" target=\"_blank\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                <div class=\"image-info\">\n                    <p><b>Likes</b> ${image.likes}</p>\n                    <p><b>Views</b> ${image.views}</p>\n                    <p><b>Comments</b> ${image.comments}</p>\n                    <p><b>Downloads</b> ${image.downloads}</p>\n                </div>\n            </a>\n        </li>\n    `;\n};\n\nconst createGallery = images => {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n  const html = images.map(createImage).join('');\n  gallery.insertAdjacentHTML('beforeend', html);\n};\n\nconst renderMoreImages = images => {\n    const gallery = document.querySelector('.gallery');\n    const html = images.map(createImage).join('');\n    gallery.insertAdjacentHTML('beforeend', html);\n};\n\nexport { \n    createGallery,\n    renderMoreImages\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { searchPixabayImages } from './js/pixabay-api.js';\nimport { createGallery, renderMoreImages } from './js/render-functions.js';\n\nconst searchBarForm = document.querySelector('#search-bar-form');\nconst loader = document.querySelector('body > .loader');\nconst loadMoreImagesBtn = document.querySelector('#btn-load-more');\nconst loadMoreLoader = document.querySelector('.load-more-block .loader');\nlet page = 1;\nlet perPage = 15;\nlet lightbox;\nlet seachValue;\n\nconst searchBarFormSubmitHandler = async (event) => {\n    event.preventDefault();\n\n    try {\n        const form = event.target;\n        seachValue = form.elements.search.value;\n      \n        if (seachValue.trim().length === 0) {\n          return;\n        }\n      \n        loadMoreImagesBtn.classList.remove('show');\n        loader.classList.add('is-active');\n        page = 1;\n        const data = await searchPixabayImages(seachValue, page, perPage);\n        \n        if (!data.hits || !data.hits.length) {\n            iziToast.error({\n              message:\n                'Sorry, there are no images matching your search query. Please try again!',\n              position: 'topRight',\n            });\n        }\n    \n        createGallery(data.hits);\n\n        if (page * perPage < data.totalHits) {\n            loadMoreImagesBtn.classList.add('show');\n        } else {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });            \n        }\n\n        lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n        lightbox.refresh();\n        loader.classList.remove('is-active');\n    } catch(error) {\n        console.error(error);\n        iziToast.error({\n            message: error.message,\n            position: 'topRight',\n        });\n        loader.classList.remove('is-active');\n    }\n};\n\nconst loadMoreImages = async (event) => {\n    try {\n\n        if (!seachValue || seachValue.trim().length === 0) {\n            return;\n        }\n\n        page += 1;\n        loadMoreImagesBtn.classList.remove('show');\n        loadMoreLoader.classList.add('is-active');\n        const data = await searchPixabayImages(seachValue, page, perPage);\n\n        if (!data.hits || !data.hits.length) {\n            iziToast.error({\n              message:\n                'Sorry, there are no images matching your search query. Please try again!',\n              position: 'topRight',\n            });\n        }\n        \n        renderMoreImages(data.hits);\n\n        const imageCard = document.querySelector('.image-card');\n        const { height } = imageCard.getBoundingClientRect();\n        window.scrollBy({\n            top: height * 2,\n            behavior: 'smooth'\n        });\n        \n        loadMoreLoader.classList.remove('is-active');\n\n        if (page * perPage < data.totalHits) {\n            loadMoreImagesBtn.classList.add('show');\n        } else {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });         \n        }\n        \n        lightbox.refresh();\n    } catch(error) {\n        console.error(error);\n        iziToast.error({\n            message: error.message,\n            position: 'topRight',\n        });\n        loader.classList.remove('is-active');\n    }\n};\n\nsearchBarForm.addEventListener('submit', searchBarFormSubmitHandler);\nloadMoreImagesBtn.addEventListener('click', loadMoreImages);\n"],"names":["API_KEY","axios","searchPixabayImages","query","page","perPage","error","createImage","image","createGallery","images","gallery","html","renderMoreImages","searchBarForm","loader","loadMoreImagesBtn","loadMoreLoader","lightbox","seachValue","searchBarFormSubmitHandler","event","data","iziToast","SimpleLightbox","loadMoreImages","imageCard","height"],"mappings":"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"}